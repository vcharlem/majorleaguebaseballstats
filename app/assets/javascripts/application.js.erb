//= require jquery
//= require jquery_ujs
//= require turbolinks
//= require bootstrap
//= require bootstrap-sprockets
//  require ajax_pagination
//= require_tree .
 $(window).load( function(){
    $('#loading').hide();
 });

 $(function() { 	
    var player_cnt = new Number(0);
    var player_empty = new Boolean(true);

    player_cnt = Number($('#player_cnt').data('cnt'));
    player_empty = (player_cnt == 0);

    if( player_empty) {
        $("#players").hide();
        $("#players_search").hide();  
    } else {
        $("#players").show();
        $("#players_search").show(); 
    }

    $(".pagination a").on("click", function() { 
    	$.getScript(this.href);
      	return false;
    });
 
    doneloading = function() {
        window.location.reload();
        return 0;
    }

    startloading = function() {
        $("#players").hide();
        $("#players_search").hide(); 
        $('#loading').show();  
    }

    $('#fetch').click(function(){ 
        $(this).attr("disabled", "disabled"); 

        startloading();
        $.ajax({
            url: "/upload",
            type: 'GET',
            success: doneloading
        });
      })

    $("#players_search input").keyup(
    	function() {
      $.get($("#players_search").attr("action"), $("#players_search").serialize(), null, "script");
      return false;
    });
}); 
